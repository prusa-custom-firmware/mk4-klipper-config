# Do not edit this file!
# You can override settings from this file by adding a section of the same name
# in printer.cfg or another file included from it after the base configuration.

[heater_bed]
heater_pin: PB0
sensor_type: ATC Semitec 104GT-2
sensor_pin: PA4
control: pid
min_temp: 0
# 110째C is the maximum published bed temperature, but 
# Prusa-Firmware-Buddy/include/marlin/Configuration_MK4.h L476
# says 125째C, with a 5째C safety margin. Klipper conflates maximum set
# temperature, accurate reading range of the thermistor, and maximum safe
# temperature, and shuts down if the temperature ever reads above max_temp. So
# maybe this should be 130째C to account for the safety margin?
max_temp: 125
# The heater (bed and extruder) PWM runs at 27kHz in Buddy FW. There is audible
# noise if these are run at a lower frequency, or clicking at a very low
# frequency.
pwm_cycle_time: 0.00004 # 25kHz
# Copied from Prusa-Firmware-Buddy/include/marlin/Configuration_MK4.h L552+
pid_Kp: 126.13
pid_Ki: 4.30
pid_Kd: 924.76

[bed_mesh]
speed: 240
horizontal_move_z: 2
mesh_min: 0,0
mesh_max: 250,210
probe_count: 9  # GRID_MAX_POINTS_{X,Y} = 21 in Configuration_MK4.h ???
algorithm: bicubic
mesh_pps: 8, 10 # Number of points per segment to interpolate between
# Move splitting affects how the bed mesh is used during initial layers
split_delta_z: 0.01  # Probe is usually accurate to ~0.001mm
move_check_distance: 3.0 # Distance along a move to check for a split
