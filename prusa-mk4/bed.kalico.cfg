# Do not edit this file!
# You can override settings from this file by adding a section of the same name
# in printer.cfg or another file included from it after the base configuration.

[heater_bed]
heater_pin: PB0
sensor_type: ATC Semitec 104GT-2
sensor_pin: PA4
control: pid
min_temp: 0
# 110째C is the maximum published bed temperature, but 
# Prusa-Firmware-Buddy/include/marlin/Configuration_MK4.h L476
# says 125째C, with a 5째C safety margin. Klipper conflates maximum set
# temperature, accurate reading range of the thermistor, and maximum safe
# temperature, and shuts down if the temperature ever reads above max_temp. So
# maybe this should be 130째C to account for the safety margin?
max_temp: 125
# The heater (bed and extruder) PWM runs at 27kHz in Buddy FW. There is audible
# noise if these are run at a lower frequency, or clicking at a very low
# frequency.
pwm_cycle_time: 0.00004 # 25kHz
# Copied from Prusa-Firmware-Buddy/include/marlin/Configuration_MK4.h L552+
pid_Kp: 126.13
pid_Ki: 4.30
pid_Kd: 924.76

[bed_mesh]
speed: 240
horizontal_z_clearance: 0.25  # new Kalico option for adaptive z height in bed meshes
mesh_min: 0,0
mesh_max: 250,210
# use 10 x 10 probes. You can afford this because only 1 sample will be taken
# This is the same time cost a 5x5 with 3 probes at each spot, but 2x the resolution.
probe_count: 10
adaptive_margin: 5
# Do NOT use zero_reference_position!! All of the z positions on the mesh are absolute.
# Use agressive move splitting to fight high / low spots
move_check_distance: 3.0
# high values _may_ cause streaks
# I paid for 1 micron accuracy (with my blood, sweat and tears), I want 1 micron adjustments
split_delta_z: 0.01
fade_start: 0.6
fade_end: 10.0
# more mesh PPS allows more exact bicubic curve expression
# 285 / 10 / 5 = 7.1mm mesh resolution
mesh_pps: 5
# bicubic this is the only option for high probe counts
algorithm: bicubic
bicubic_tension: 0.2  # default